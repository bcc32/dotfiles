#!/usr/bin/env bash

# A shim for ocamlformat followed by ocp-indent, compatible with how dune calls
# ocamlformat.

set -euo pipefail

original_ocamlformat_path=$(opam var bin)/ocamlformat
OCAMLFORMAT_PATH=${OCAMLFORMAT_PATH:-$original_ocamlformat_path}

"$OCAMLFORMAT_PATH" "$@" | ocp-indent
