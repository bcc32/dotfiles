#!/usr/bin/env perl
use 5.016;
use strict;
use warnings;

use File::Spec qw(splitpath);

open my $find, 'find . -type f |';
open my $md5sum, '| md5sum -c --quiet';

while (my $path = <$find>) {
    chomp $path;
    my (undef, undef, $basename) = File::Spec->splitpath($path);
    if ($basename =~ /^([[:xdigit:]]{32})\.\w+$/) {
        my $expected = $1;
        say $md5sum $expected, '  ', $path;
    }
}
