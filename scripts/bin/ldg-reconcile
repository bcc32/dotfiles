#!/bin/sh

reconcile() {
    echo "Reconciling the following accounts:"
    ledger accounts "$@"

    echo "--------------------------------"
    echo "Cleared"
    echo "--------------------------------"
    echo
    ledger reg --cleared --effective --sort d --tail 20 "$@"

    echo "--------------------------------"
    echo "Uncleared"
    echo "--------------------------------"
    echo
    ledger reg --uncleared --sort d "$@"
}

if [ $# -lt 1 ]; then
    reconcile "$(ledger accounts | fzf)"
else
    reconcile "$@"
fi
